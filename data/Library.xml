<fieldml>
  <continuous_domain id="library::unit_square" value="real" >
    <component id="xi1" min="0" max="1" />
    <component id="xi2" min="0" max="1" />
  </continuous_domain>
  
  <continuous_domain id="library::2d_cartesian" value="real" >
    <component id="x" />
    <component id="y" />
  </continuous_domain>
  
  <continuous_domain id="library::infinite_line" value="real" >
    <component id="value" />
  </continuous_domain>

  <continuous_domain id="library::bilinear_interpolation_parameters" value="real" >
    <component id="node1" />
    <component id="node2" />
    <component id="node3" />
    <component id="node4" />
  </continuous_domain>

  <field id="library::bilinear_lagrange" value_domain="library::bilinear_interpolation_parameters">
    <parameter id="xi" domain="library::unit_square" />
    
    <evaluate_component id="node1">
      <multiply>
        <subtract>
          <constant_value value="1" />
          <parameter_value id="xi" component="xi1" />
        </subtract>
        <subtract>
          <constant_value value="1" />
          <parameter_value id="xi" component="xi2" />
        </subtract>
      </multiply>
    </evaluate_component>

    <evaluate_component id="node2">
      <multiply>
        <parameter_value id="xi" component="xi1" />
        <subtract>
          <constant_value value="1" />
          <parameter_value id="xi" component="xi2" />
        </subtract>
      </multiply>
    </evaluate_component>

    <evaluate_component id="node3">
      <multiply>
        <subtract>
          <constant_value value="1" />
          <parameter_value id="xi" component="xi1" />
        </subtract>
        <parameter_value id="xi" component="xi2" />
      </multiply>
    </evaluate_component>

    <evaluate_component id="node4">
      <multiply>
        <parameter_value id="xi" component="xi1" />
        <parameter_value id="xi" component="xi2" />
      </multiply>
    </evaluate_component>
  </field>
  
  <field id="library::bilinear_interpolation" value_domain="library::infinite_line">
    <parameter id="parameters" domain="library::bilinear_interpolation_parameters" />
    <mapped_parameter id="phi" mapping_field="library::bilinear_lagrange" />
    
    <evaluate_component id="value">
      <dot_product>
        <parameter_vector id="parameters" />
        <parameter_vector id="phi" />
      </dot_product>
    </evaluate_component>
  </field>
</fieldml>
