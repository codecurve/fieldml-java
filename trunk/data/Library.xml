<fieldml>
  <continuous_domain id="library::unit_square" value="real" >
    <component id="xi1" min="0" max="1" />
    <component id="xi2" min="0" max="1" />
  </continuous_domain>
  
  <continuous_domain id="library::2d_cartesian" value="real" >
    <component id="x" />
    <component id="y" />
  </continuous_domain>
  
  <continuous_domain id="library::infinite_line" value="real" >
    <component id="value" />
  </continuous_domain>

  <continuous_domain id="library::bilinear_interpolation_parameters" value="real" >
    <component id="node1" />
    <component id="node2" />
    <component id="node3" />
    <component id="node4" />
  </continuous_domain>

  <field id="library::bilinear_lagrange" value_domain="library::bilinear_interpolation_parameters">
    <parameter_domain id="library::cartesian_2d" />
    
    <evaluate_component id="node1">
      <multiply>
        <subtract>
          <constant_value value="1" />
          <domain_value domain_number="1" component="xi1" />
        </subtract>
        <subtract>
          <constant_value value="1" />
          <domain_value domain_number="1" component="xi2" />
        </subtract>
      </multiply>
    </evaluate_component>

    <evaluate_component id="node2">
      <multiply>
        <domain_value domain_number="1" component="xi1" />
        <subtract>
          <constant_value value="1" />
          <domain_value domain_number="1" component="xi2" />
        </subtract>
      </multiply>
    </evaluate_component>

    <evaluate_component id="node3">
      <multiply>
        <subtract>
          <constant_value value="1" />
          <domain_value domain_number="1" component="xi1" />
        </subtract>
        <domain_value domain_number="1" component="xi2" />
      </multiply>
    </evaluate_component>

    <evaluate_component id="node4">
      <multiply>
        <domain_value domain_number="1" component="xi1" />
        <domain_value domain_number="1" component="xi2" />
      </multiply>
    </evaluate_component>
  </field>
  
  <field id="library::bilinear_interpolation" value_domain="library::infinite_line">
    <parameter_domain domain="library::bilinear_interpolation_parameters" />
    <parameter_map mapping_field="library::bilinear_lagrange">
      <parameter_domain domain="library::cartesian_2d" />
    </parameter_map>
    
    <evaluate_component id="value">
      <dot_product>
        <domain_vector domain_number="1" />
        <domain_vector domain_number="2" />
      </dot_product>
    </evaluate_component>
  </field>
</fieldml>
